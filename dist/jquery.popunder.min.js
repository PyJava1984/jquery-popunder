/*! jquery-plugin to create popunders in major browsers., 0.2.54 https://github.com/hpbuniat/jquery-popunder
Copyright (c) 2017 Hans-Peter Buniat,  license */

!function(t,e,n,i,o){"use strict";t.popunder=function(n,i,o,r){var s=t.popunder.helper;if(s.getMethod(),0===arguments.length&&(n=e.aPopunder),o||i)s.bindEvents(n,i,o);else if(n="function"==typeof n?n(r):n,!0!==s.ua.ie&&!0!==s.ua.g||(n=s.handleTargetBlank(n,r)),s.reset(),typeof n!==s.u){do{s.queue(n,r),s.first=!1}while(n.length>0);s.queue(n,r)}return t},t.popunder.helper={_top:e.self,lastWin:null,lastTarget:null,f:!1,last:!1,first:!0,b:"about:blank",u:"undefined",o:null,du:"__jqpu",ua:{ie:!!/msie|trident/i.test(i.userAgent),oldIE:!!/msie/i.test(i.userAgent),ff:!!/firefox/i.test(i.userAgent),o:!!/opera/i.test(i.userAgent),g:!!/chrome/i.test(i.userAgent),w:!!/webkit/i.test(i.userAgent),linux:!!/linux/i.test(i.userAgent),touch:"ontouchstart"in o.documentElement||!!/bada|blackberry|iemobile|android|iphone|ipod|ipad/i.test(i.userAgent)},m:{ie:"simple",ff:"pop",w:"tab",g:"switcher",o:"switcher",linux:"switcher"},hs:[],ns:"jqpu",def:{window:{toolbar:0,scrollbars:1,location:1,statusbar:1,menubar:0,resizable:1,width:(n.availWidth-122).toString(),height:(n.availHeight-122).toString(),screenX:0,screenY:0,left:0,top:0},name:"__pu",cookie:"__puc",blocktime:!1,skip:{},cb:null,popup:!1},testStack:function(t,e){var n,i=!1;for(n in t)t.hasOwnProperty(n)&&t[n]&&e[n]&&(i=t[n]);return i},getMethod:function(){var t=this;return"object"==typeof t.m&&(t.m=t.testStack(t.m,t.ua)),t.ua.touch&&(t.m="switcher"),t},queue:function(t,e){var n=!1,i=this;if(t.length>0)for(;!1===n;){var o=t.shift();n=!o||i.open(o[0],o[1]||{},t.length,e)}else!1===i.last?(i.last=!0,i.bg().href(!0)):i.f||i.ua.g||i.ua.ie||i.bg();return i},handler:function(t,e){var n=this;"function"==typeof n.hs[t]&&n.hs[t](e)},getTrigger:function(e){return t("#"+e).parents(".jq-pu").children().eq(0)},bindEvents:function(e,n,i){var o=this,r="string",s=o.ua.touch?"touchstart click":"click",a=o.hs.length,u=function(t){return function(e){o.handler(t,e)}}(a);return o.hs[a]=function(e){return function(n){return n&&!n.target&&(n={target:o.getTrigger(n)}),t.popunder(e,!1,!1,n),!0}}(e),!n||o.ua.g||o.ua.w||o.ua.touch||(n=typeof n===r?t(n):n).on("submit."+o.ns,u),i&&(i=typeof i===r?t(i):i).on(s+"."+o.ns,u),o},cookieCheck:function(e,n){var i=this.rand(n.cookie,!1),o=t.cookie(i),r=!1;return o?-1===o.indexOf(e)?o+=e:r=!0:o=e,t.cookie(i,o,{expires:new Date((new Date).getTime()+6e4*n.blocktime)}),r},rand:function(t,e){var n=this;return(t||n.du)+(!1===e?"":Math.floor(89999999*Math.random()+1e7).toString()).replace(".","")},open:function(n,i,o,r){var s,a,u=this,c="function";if(a=t.extend(!0,{},u.def,i),u.o=n,top!==e.self)try{top.document.location.toString()&&(u._top=top)}catch(t){}return!u.testStack(a.skip,u.ua)&&((!a.blocktime||typeof t.cookie!==c||!u.cookieCheck(n,a))&&(n!==u.du&&(u.lastTarget=n,!0===u.first&&"switcher"===u.m?(s=u.getFormUrl(r))&&(r.preventDefault(),u.switcher.switchWindow(s,u.o,u.rand(a.name,!i.name))):!0===u.isTab()?u.switcher.tab(u,u.o):!0!==u.first&&!0!==u.isMultiple()||(u.lastWin=u._top.window.open(u.o,u.rand(a.name,!i.name),u.getOptions(a.window))||u.lastWin),!0===u.ua.ff&&u.bg(),u.href(o),typeof a.cb===c&&a.cb(u.lastWin)),!0))},bg:function(t){var n=this;return n.lastWin&&n.lastTarget&&!t?!0===n.ua.ie?(n.switcher.simple(n),e.setTimeout(function(){n.switcher.simple(n)},500)):n.switcher.pop(n):"oc"===t&&n.switcher.pop(n),n},switcher:{simple:function(t){t.ua.oldIE?(t.lastWin.blur(),t.lastWin.opener.window.focus(),e.self.window.focus(),e.focus()):o.focus()},pop:function(t){!function(e){try{t.f=e.window.open(t.b),t.f&&t.f.close()}catch(t){}try{e.opener.window.focus()}catch(t){}}(t.lastWin)},tab:function(n,i){var r=!i,s=t("<a/>",{href:i||"data:text/html,<script>window.close();<\/script>;"}).appendTo(o.body),a=o.createEvent("MouseEvents");r=!0===n.isTab()?!r:r,a.initMouseEvent("click",!r,!0,e,0,0,0,0,0,r,!1,!r,r,0,null),i?e.setTimeout(function(){e.getSelection().empty()},250):(s[0].dispatchEvent(a),s[0].parentNode.removeChild(s[0]))},switchWindow:function(t,n,i){e.open(t,i),e.location.assign(n)}},isTab:function(){return"tab"===this.m},isMultiple:function(){return"pop"===this.m||"simple"===this.m},href:function(t){var e,n=this;return t&&n.lastTarget&&n.lastWin&&n.lastTarget!==n.b&&n.lastTarget!==n.o&&(!0===n.isTab()?((e=n.lastWin.document).open(),e.write("<html><head><title>"+o.title+'</title><script type="text/javascript">window.location="'+n.lastTarget+'";<\/script></head><body></body></html>'),e.close()):n.lastWin.document.location.href=n.lastTarget),n},handleTargetBlank:function(t,e){if(e&&typeof e.target!==this.u){var n=this,i=n.getFormUrl(e,!1);i&&(n.ua.ie||(i=n.du),t.unshift([i,{popup:!0}]))}return t},getFormUrl:function(e,n){var i,o,r=this,s=":submit, button",a=t(e.target);return i=!0!==a.is(s)?(a=a.parents(s)).parents("form"):t(e.target.form),typeof n===r.u&&(n=!0),0!==a.length&&0!==i.length&&("get"!==(i.attr("method")+"").toLowerCase()||"_blank"!==i.attr("target")&&!n||(o=i.attr("action")+"/?"+i.serialize())),o},reset:function(){var t=this;return t.f=t.last=!1,t.first=!0,t.lastTarget=t.lastWin=null,t},unbind:function(n,i){var o=this,r="string";return o.reset(),n&&(n=typeof n===r?t(n):n).off("submit."+o.ns),i&&((i=typeof i===r?t(i):i).off("click."+o.ns).next(".jq-pu object").remove(),i.unwrap()),e.aPopunder=[],o},getOptions:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e+"="+t[e]);return n.join(",")}}}(jQuery,window,screen,navigator,document);